function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var e=/*#__PURE__*/function(){function e(e){var r,n,a,i,s=this;this.el=e,this.dur=1e3*parseFloat(e.dataset.duration||"1"),this.startTime=!1,this.endVal=parseFloat(e.dataset.count||"0"),this.startVal=e.textContent.length>0&&"number"==typeof(r=+e.textContent)&&!1===isNaN(r)?+e.textContent:0,this.dec=parseInt(e.dataset.decimal||"0"),this.done=!1,this.group=!0,"group"in e.dataset&&"false"===e.dataset.group&&(this.group=!1),this.tagType="input"===e.localName?"input":"text"===e.tagName||"tspan"===e.tagName?"text":"element",this.down=this.startVal>this.endVal,this.formatter=(n=e.dataset.locale||null,a=JSON.parse(e.dataset.format||"{}"),i=this.group,console.log(n,a,i),i?null===n?new Intl.NumberFormat:new Intl.NumberFormat(n,a):{format:function(t){return t}}),"scroll"in e.dataset&&(this.observer=new IntersectionObserver(function(r,n){for(var a,i=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r);!(a=i()).done;)a.value.isIntersecting?(s.count(),"once"===e.dataset.scroll&&(n.disconnect(),s.observer=null)):s.reset()}),this.observer.observe(e))}var r,n,a=e.prototype;return a.count=function(t){if(this.done&&this.reset(),void 0!==t){this.startTime||(this.startTime=t);var e=t-this.startTime;this.remaining=this.dur-e;var r,n=this.dir?(r=this.startVal)+e/this.dur*(this.endVal-r):function(t,e,r,n){return t-r/n*(t-e)}(this.startVal,this.endVal,e,this.dur);(this.down&&n<this.endVal||!this.down&&n>this.endVal)&&(n=this.endVal),n=parseFloat(n.toFixed(this.dec)),this.formatter&&(n=this.formatter.format(n)),this.frameVal=n,e<this.dur?this.rAF=requestAnimationFrame(this.count.bind(this)):this.done=!0}else this.rAF=requestAnimationFrame(this.count.bind(this))},a.reset=function(){this.done=!1,this.frameVal=this.startVal,this.startTime=!1,cancelAnimationFrame(this.rAF)},r=e,(n=[{key:"frameVal",get:function(){return this.el.textContent},set:function(t){switch(this.tagType){case"input":this.el.value=t;case"element":case"text":this.el.textContent=t;default:this.el.textContent=t}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();export{e as Tally};
//# sourceMappingURL=tallyjs.js.map
